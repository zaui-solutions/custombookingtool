<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Zaui Designer - Custom Booking Pages</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass {
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(209, 213, 219, 0.3);
        }
        .color-picker {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            position: relative;
        }
        .color-picker.transparent {
            background: linear-gradient(45deg, #ccc 25%, transparent 25%), 
                        linear-gradient(-45deg, #ccc 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #ccc 75%), 
                        linear-gradient(-45deg, transparent 75%, #ccc 75%);
            background-size: 8px 8px;
            background-position: 0 0, 0 4px, 4px -4px, -4px 0px;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #6366f1;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background-color: #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .toggle-switch.active {
            background-color: #8b5cf6;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        .toggle-switch.active::after {
            transform: translateX(20px);
        }
        .dropdown {
            position: relative;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            max-height: 300px;
            overflow-y: auto;
        }
        .dropdown-content.show {
            display: block;
        }
        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            transition: background-color 0.2s;
        }
        .dropdown-item:hover {
            background-color: #f8fafc;
        }
        .dropdown-item:last-child {
            border-bottom: none;
        }
        .dropdown-item.selected {
            background-color: #ede9fe;
            color: #7c3aed;
            font-weight: 600;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50">
    <!-- Header -->
    <div class="bg-white/90 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">
                            AI Zaui Designer
                        </h1>
                        <p class="text-sm text-gray-600">Create & customize beautiful booking pages</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Message Box -->
        <div id="messageBox" class="hidden mb-6 p-4 rounded-xl border-l-4 transition-all duration-300"></div>

        <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
            <!-- Input Section -->
            <div class="space-y-6">
                <div class="glass rounded-2xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                        </svg>
                        Design Your Booking Page
                    </h2>

                    <div class="space-y-4">
                        <!-- Design Element Toggles -->
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="text-sm font-semibold text-gray-700 mb-3">Toggle Design Elements</h3>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Header Section</span>
                                    <div class="toggle-switch active" onclick="toggleElement('showHeader')" id="toggleHeader"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Logo</span>
                                    <div class="toggle-switch active" onclick="toggleElement('showLogo')" id="toggleLogo"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Company Title</span>
                                    <div class="toggle-switch active" onclick="toggleElement('showTitle')" id="toggleTitle"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Subtitle</span>
                                    <div class="toggle-switch active" onclick="toggleElement('showSubtitle')" id="toggleSubtitle"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Intro Section</span>
                                    <div class="toggle-switch active" onclick="toggleElement('showIntro')" id="toggleIntro"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Footer Button</span>
                                    <div class="toggle-switch active" onclick="toggleElement('showFooter')" id="toggleFooter"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Zaui Embed Code -->
                        <div>
                            <label for="zauiEmbed" class="block text-sm font-semibold text-gray-700 mb-2">
                                Zaui Booking Engine Code *
                            </label>
                            <textarea 
                                id="zauiEmbed" 
                                rows="4" 
                                class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 resize-none bg-gray-50 hover:bg-white text-sm"
                                placeholder="Paste your Zaui embed code here..."
                            ></textarea>
                        </div>

                        <!-- Company Name -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="companyName" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Company Name
                                </label>
                                <input 
                                    type="text" 
                                    id="companyName" 
                                    class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white"
                                    placeholder="Your Company"
                                />
                            </div>
                            <div>
                                <label for="webpageUrl" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Website URL
                                </label>
                                <input 
                                    type="url" 
                                    id="webpageUrl" 
                                    class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white"
                                    value="https://www.mycompany.com"
                                />
                            </div>
                        </div>

                        <!-- Header Background Image -->
                        <div>
                            <label for="headerImageUrl" class="block text-sm font-semibold text-gray-700 mb-2">
                                Header Background Image URL (Optional)
                            </label>
                            <input 
                                type="url" 
                                id="headerImageUrl" 
                                class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white"
                                placeholder="/images/HeaderBackgroundImage.jpg"
                            />
                            <p class="text-xs text-gray-500 mt-1">This will be used as a background image for the header section with overlay</p>
                        </div>

                        <!-- Logo Configuration -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">
                                Logo Configuration
                            </label>
                            
                            <!-- Logo URL -->
                            <div class="mb-3">
                                <label for="logoUrl" class="block text-xs font-medium text-gray-600 mb-1">
                                    Logo Image URL
                                </label>
                                <input 
                                    type="url" 
                                    id="logoUrl" 
                                    class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white text-sm"
                                    placeholder="/images/photo1763434749.jpg"
                                />
                            </div>

                            <!-- Logo Style Dropdown -->
                            <div class="grid grid-cols-2 gap-3 mb-3">
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 mb-1">Logo Style</label>
                                    <div class="dropdown">
                                        <button type="button" onclick="toggleDropdown('logoStyleDropdown')" class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 hover:bg-white text-sm text-left flex items-center justify-between">
                                            <span id="selectedLogoStyleText">Circle - Classic</span>
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                        </button>
                                        <div id="logoStyleDropdown" class="dropdown-content">
                                            <div class="dropdown-item selected" onclick="selectLogoStyle('circle', 'Circle - Classic')">
                                                <div class="font-medium">Circle - Classic</div>
                                                <div class="text-xs text-gray-500">Traditional circular logo</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoStyle('square', 'Square - Modern')">
                                                <div class="font-medium">Square - Modern</div>
                                                <div class="text-xs text-gray-500">Sharp contemporary design</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoStyle('rounded', 'Rounded - Friendly')">
                                                <div class="font-medium">Rounded - Friendly</div>
                                                <div class="text-xs text-gray-500">Soft rounded corners</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoStyle('badge', 'Badge - Premium')">
                                                <div class="font-medium">Badge - Premium</div>
                                                <div class="text-xs text-gray-500">Horizontal luxury badge</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoStyle('floating', 'Floating - Elegant')">
                                                <div class="font-medium">Floating - Elegant</div>
                                                <div class="text-xs text-gray-500">Elevated with shadows</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoStyle('banner', 'Banner - Corporate')">
                                                <div class="font-medium">Banner - Corporate</div>
                                                <div class="text-xs text-gray-500">Wide professional format</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Logo Size Dropdown -->
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 mb-1">Logo Size</label>
                                    <div class="dropdown">
                                        <button type="button" onclick="toggleDropdown('logoSizeDropdown')" class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 hover:bg-white text-sm text-left flex items-center justify-between">
                                            <span id="selectedLogoSizeText">Medium - 120px</span>
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                        </button>
                                        <div id="logoSizeDropdown" class="dropdown-content">
                                            <div class="dropdown-item" onclick="selectLogoSize('small', 'Small - 80px')">
                                                <div class="font-medium">Small - 80px</div>
                                                <div class="text-xs text-gray-500">Compact and subtle</div>
                                            </div>
                                            <div class="dropdown-item selected" onclick="selectLogoSize('medium', 'Medium - 120px')">
                                                <div class="font-medium">Medium - 120px</div>
                                                <div class="text-xs text-gray-500">Balanced and clear</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoSize('large', 'Large - 160px')">
                                                <div class="font-medium">Large - 160px</div>
                                                <div class="text-xs text-gray-500">Bold and prominent</div>
                                            </div>
                                            <div class="dropdown-item" onclick="selectLogoSize('xlarge', 'X-Large - 200px')">
                                                <div class="font-medium">X-Large - 200px</div>
                                                <div class="text-xs text-gray-500">Maximum impact</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Logo Position Dropdown -->
                            <div>
                                <label class="block text-xs font-medium text-gray-600 mb-1">Logo Position</label>
                                <div class="dropdown">
                                    <button type="button" onclick="toggleDropdown('logoPositionDropdown')" class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 hover:bg-white text-sm text-left flex items-center justify-between">
                                        <span id="selectedLogoPositionText">Center - Above Title</span>
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </button>
                                    <div id="logoPositionDropdown" class="dropdown-content">
                                        <div class="dropdown-item selected" onclick="selectLogoPosition('center-above', 'Center - Above Title')">
                                            <div class="font-medium">Center - Above Title</div>
                                            <div class="text-xs text-gray-500">Traditional centered layout</div>
                                        </div>
                                        <div class="dropdown-item" onclick="selectLogoPosition('center-below', 'Center - Below Title')">
                                            <div class="font-medium">Center - Below Title</div>
                                            <div class="text-xs text-gray-500">Logo under company name</div>
                                        </div>
                                        <div class="dropdown-item" onclick="selectLogoPosition('left-inline', 'Left - Inline with Title')">
                                            <div class="font-medium">Left - Inline with Title</div>
                                            <div class="text-xs text-gray-500">Side-by-side layout</div>
                                        </div>
                                        <div class="dropdown-item" onclick="selectLogoPosition('right-inline', 'Right - Inline with Title')">
                                            <div class="font-medium">Right - Inline with Title</div>
                                            <div class="text-xs text-gray-500">Logo on the right side</div>
                                        </div>
                                        <div class="dropdown-item" onclick="selectLogoPosition('top-left', 'Top Left Corner')">
                                            <div class="font-medium">Top Left Corner</div>
                                            <div class="text-xs text-gray-500">Positioned at top-left</div>
                                        </div>
                                        <div class="dropdown-item" onclick="selectLogoPosition('top-right', 'Top Right Corner')">
                                            <div class="font-medium">Top Right Corner</div>
                                            <div class="text-xs text-gray-500">Positioned at top-right</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Primary Color Selection -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">
                                Choose Primary Color
                            </label>
                            <div class="grid grid-cols-6 gap-2">
                                <div class="text-center">
                                    <div class="color-picker bg-purple-500 mx-auto mb-1 ring-4 ring-purple-300" data-color="#8b5cf6" onclick="selectPrimaryColor('#8b5cf6')"></div>
                                    <span class="text-xs text-gray-600">Purple</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker bg-blue-500 mx-auto mb-1" data-color="#3b82f6" onclick="selectPrimaryColor('#3b82f6')"></div>
                                    <span class="text-xs text-gray-600">Blue</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker bg-green-500 mx-auto mb-1" data-color="#10b981" onclick="selectPrimaryColor('#10b981')"></div>
                                    <span class="text-xs text-gray-600">Green</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker bg-red-500 mx-auto mb-1" data-color="#ef4444" onclick="selectPrimaryColor('#ef4444')"></div>
                                    <span class="text-xs text-gray-600">Red</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker bg-yellow-500 mx-auto mb-1" data-color="#f59e0b" onclick="selectPrimaryColor('#f59e0b')"></div>
                                    <span class="text-xs text-gray-600">Orange</span>
                                </div>
                                <div class="text-center">
                                    <input type="color" id="customPrimaryColor" class="color-picker mx-auto mb-1" onchange="selectPrimaryColor(this.value)" />
                                    <span class="text-xs text-gray-600">Custom</span>
                                </div>
                            </div>
                            <div class="mt-2 text-center">
                                <span class="text-sm text-gray-600">Primary: </span>
                                <span id="selectedPrimaryColor" class="text-sm font-semibold text-purple-600">#8b5cf6</span>
                            </div>
                        </div>

                        <!-- Secondary Color Selection -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">
                                Choose Secondary Color
                            </label>
                            <div class="grid grid-cols-6 gap-2">
                                <div class="text-center">
                                    <div class="color-picker bg-purple-200 mx-auto mb-1 ring-4 ring-purple-200" data-color="#e9d5ff" onclick="selectSecondaryColor('#e9d5ff')"></div>
                                    <span class="text-xs text-gray-600">Light Purple</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker bg-blue-200 mx-auto mb-1" data-color="#dbeafe" onclick="selectSecondaryColor('#dbeafe')"></div>
                                    <span class="text-xs text-gray-600">Light Blue</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker bg-white mx-auto mb-1 border-4 border-gray-300" data-color="#ffffff" onclick="selectSecondaryColor('#ffffff')"></div>
                                    <span class="text-xs text-gray-600">White</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker transparent mx-auto mb-1 border-4 border-gray-300" data-color="transparent" onclick="selectSecondaryColor('transparent')"></div>
                                    <span class="text-xs text-gray-600">Transparent</span>
                                </div>
                                <div class="text-center">
                                    <div class="color-picker mx-auto mb-1 border-4 border-gray-300" data-color="rgba(255,255,255,0.1)" onclick="selectSecondaryColor('rgba(255,255,255,0.1)')" style="background: rgba(255,255,255,0.1);"></div>
                                    <span class="text-xs text-gray-600">Glass</span>
                                </div>
                                <div class="text-center">
                                    <input type="color" id="customSecondaryColor" class="color-picker mx-auto mb-1" onchange="selectSecondaryColor(this.value)" />
                                    <span class="text-xs text-gray-600">Custom</span>
                                </div>
                            </div>
                            <div class="mt-2 text-center">
                                <span class="text-sm text-gray-600">Secondary: </span>
                                <span id="selectedSecondaryColor" class="text-sm font-semibold text-purple-600">#e9d5ff</span>
                            </div>
                        </div>

                        <!-- Intro Message -->
                        <div>
                            <label for="introText" class="block text-sm font-semibold text-gray-700 mb-2">
                                Welcome Message
                            </label>
                            <textarea 
                                id="introText" 
                                rows="3" 
                                class="w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 resize-none bg-gray-50 hover:bg-white"
                                placeholder="Welcome message for your customers..."
                            >Book your experience with us! Secure and easy booking below.</textarea>
                        </div>

                        <!-- Generate Button -->
                        <button 
                            id="generateBtn" 
                            onclick="generateDesign()"
                            class="w-full bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-2"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                            </svg>
                            <span>Generate Booking Page</span>
                            <div id="loadingSpinner" class="loading-spinner hidden"></div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Section -->
            <div class="space-y-6">
                <div class="glass rounded-2xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Live Preview
                        </div>
                        <button id="copyCodeBtn" onclick="copyGeneratedCode()" class="px-3 py-1 bg-green-100 hover:bg-green-200 text-green-700 rounded text-sm transition-colors duration-200 hidden">
                            Copy HTML
                        </button>
                    </h2>

                    <!-- Generated Design Container -->
                    <div id="previewContainer" class="border-2 border-gray-200 rounded-lg bg-gray-50 min-h-96 overflow-auto">
                        <div class="flex items-center justify-center h-96 text-gray-500">
                            <div class="text-center">
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                                </svg>
                                <h3 class="text-lg font-semibold mb-2">Ready to Create</h3>
                                <p>Fill in your details and click "Generate Booking Page" to see your custom design</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let selectedPrimaryColor = '#8b5cf6';
        let selectedSecondaryColor = '#e9d5ff';
        let selectedLogoStyle = 'circle';
        let selectedLogoSize = 'medium';
        let selectedLogoPosition = 'center-above';
        let generatedHTML = '';
        
        // Design element toggles
        let designToggles = {
            showHeader: true,
            showLogo: true,
            showTitle: true,
            showSubtitle: true,
            showIntro: true,
            showFooter: true
        };

        console.log('üîß AI Zaui Designer loaded - ENHANCED WITH DROPDOWNS');

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.matches('.dropdown button') && !event.target.closest('.dropdown')) {
                const dropdowns = document.querySelectorAll('.dropdown-content');
                dropdowns.forEach(dropdown => {
                    dropdown.classList.remove('show');
                });
            }
        });

        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle('show');
            
            // Close other dropdowns
            const allDropdowns = document.querySelectorAll('.dropdown-content');
            allDropdowns.forEach(d => {
                if (d.id !== dropdownId) {
                    d.classList.remove('show');
                }
            });
        }

        function selectLogoStyle(style, displayText) {
            selectedLogoStyle = style;
            document.getElementById('selectedLogoStyleText').textContent = displayText;
            
            // Update selected state
            const dropdown = document.getElementById('logoStyleDropdown');
            dropdown.querySelectorAll('.dropdown-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            dropdown.classList.remove('show');
            console.log('üé® Logo style selected:', style);
        }

        function selectLogoSize(size, displayText) {
            selectedLogoSize = size;
            document.getElementById('selectedLogoSizeText').textContent = displayText;
            
            // Update selected state
            const dropdown = document.getElementById('logoSizeDropdown');
            dropdown.querySelectorAll('.dropdown-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            dropdown.classList.remove('show');
            console.log('üìè Logo size selected:', size);
        }

        function selectLogoPosition(position, displayText) {
            selectedLogoPosition = position;
            document.getElementById('selectedLogoPositionText').textContent = displayText;
            
            // Update selected state
            const dropdown = document.getElementById('logoPositionDropdown');
            dropdown.querySelectorAll('.dropdown-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            dropdown.classList.remove('show');
            console.log('üìç Logo position selected:', position);
        }

        function toggleElement(elementName) {
            designToggles[elementName] = !designToggles[elementName];
            const toggleBtn = document.getElementById('toggle' + elementName.replace('show', ''));
            
            if (designToggles[elementName]) {
                toggleBtn.classList.add('active');
            } else {
                toggleBtn.classList.remove('active');
            }
            
            console.log(`üîÑ Toggled ${elementName}:`, designToggles[elementName]);
        }

        function selectPrimaryColor(color) {
            console.log('üé® Primary color selected:', color);
            selectedPrimaryColor = color;
            document.getElementById('selectedPrimaryColor').textContent = color;
            
            // Update color picker visuals
            document.querySelectorAll('[data-color]').forEach(picker => {
                picker.classList.remove('ring-4', 'ring-purple-300');
            });
            
            const selectedPicker = document.querySelector(`[data-color="${color}"]`) || document.getElementById('customPrimaryColor');
            if (selectedPicker) {
                selectedPicker.classList.add('ring-4', 'ring-purple-300');
            }
        }

        function selectSecondaryColor(color) {
            console.log('üé® Secondary color selected:', color);
            selectedSecondaryColor = color;
            document.getElementById('selectedSecondaryColor').textContent = color;
            
            // Update secondary color picker visuals
            document.querySelectorAll('[data-color]').forEach(picker => {
                picker.classList.remove('ring-4', 'ring-blue-300');
            });
            
            const selectedPicker = document.querySelector(`[data-color="${color}"]`) || document.getElementById('customSecondaryColor');
            if (selectedPicker) {
                selectedPicker.classList.add('ring-4', 'ring-blue-300');
            }
        }

        function generateDesign() {
            console.log('üöÄ Starting generation...');
            
            const zauiEmbed = document.getElementById('zauiEmbed').value;
            const companyName = document.getElementById('companyName').value || 'Your Company';
            const webpageUrl = document.getElementById('webpageUrl').value;
            const introText = document.getElementById('introText').value;
            const logoUrl = document.getElementById('logoUrl').value;
            const headerImageUrl = document.getElementById('headerImageUrl').value;

            console.log('üìù Form data:', { 
                zauiEmbed: zauiEmbed.length, 
                companyName, 
                webpageUrl, 
                introText, 
                logoUrl,
                headerImageUrl,
                logoStyle: selectedLogoStyle,
                logoSize: selectedLogoSize,
                logoPosition: selectedLogoPosition
            });
            console.log('üéõÔ∏è Design toggles:', designToggles);

            // Allow generation even without Zaui code for demo purposes
            const demoZauiCode = zauiEmbed.trim() || '<div style="padding:20px; background:#f0f0f0; text-align:center; border:1px solid #ddd; border-radius:8px;">Demo Booking Widget<br><button style="background:#8b5cf6; color:white; padding:10px 20px; border:none; border-radius:5px; margin-top:10px;">Book Now</button></div>';

            // Show loading
            const generateBtn = document.getElementById('generateBtn');
            const spinner = document.getElementById('loadingSpinner');
            const btnText = generateBtn.querySelector('span');
            
            generateBtn.disabled = true;
            spinner.classList.remove('hidden');
            btnText.textContent = 'Generating...';

            console.log('‚è≥ Loading state activated');

            // Generate the booking page
            setTimeout(() => {
                try {
                    console.log('üîß Creating booking page...');
                    const design = createBookingPage({
                        companyName,
                        webpageUrl,
                        introText,
                        zauiEmbed: demoZauiCode,
                        primaryColor: selectedPrimaryColor,
                        secondaryColor: selectedSecondaryColor,
                        logoUrl,
                        headerImageUrl,
                        logoStyle: selectedLogoStyle,
                        logoSize: selectedLogoSize,
                        logoPosition: selectedLogoPosition,
                        toggles: designToggles
                    });

                    console.log('‚úÖ Design created, length:', design.length);
                    displayGeneratedDesign(design);
                    showMessage('Booking page generated successfully!');
                    document.getElementById('copyCodeBtn').classList.remove('hidden');
                } catch (error) {
                    console.error('‚ùå Generation error:', error);
                    showMessage('Error generating design: ' + error.message, 'error');
                }
                
                // Hide loading
                generateBtn.disabled = false;
                spinner.classList.add('hidden');
                btnText.textContent = 'Generate Booking Page';
                console.log('‚úÖ Loading state deactivated');
            }, 1000);
        }

        function createBookingPage(options) {
            console.log('üèóÔ∏è Building HTML with options:', options);
            const { companyName, webpageUrl, introText, zauiEmbed, primaryColor, secondaryColor, logoUrl, headerImageUrl, logoStyle, logoSize, logoPosition, toggles } = options;
            
            // Logo size mapping
            const logoSizes = {
                small: { width: 80, height: 80 },
                medium: { width: 120, height: 120 },
                large: { width: 160, height: 160 },
                xlarge: { width: 200, height: 200 }
            };
            
            const currentLogoSize = logoSizes[logoSize] || logoSizes.medium;
            
            // Build logo HTML with different styles and positions
            let logoHTML = '';
            if (logoUrl && toggles.showLogo) {
                const logoStyles = {
                    circle: `width: ${currentLogoSize.width}px; height: ${currentLogoSize.height}px; border-radius: 50%; object-fit: cover; border: 4px solid rgba(255,255,255,0.8); box-shadow: 0 8px 32px rgba(0,0,0,0.3);`,
                    square: `width: ${currentLogoSize.width}px; height: ${currentLogoSize.height}px; border-radius: 8px; object-fit: cover; border: 4px solid rgba(255,255,255,0.8); box-shadow: 0 8px 32px rgba(0,0,0,0.3);`,
                    rounded: `width: ${currentLogoSize.width}px; height: ${currentLogoSize.height}px; border-radius: 20px; object-fit: cover; border: 4px solid rgba(255,255,255,0.8); box-shadow: 0 8px 32px rgba(0,0,0,0.3);`,
                    badge: `width: ${Math.floor(currentLogoSize.width * 1.4)}px; height: ${Math.floor(currentLogoSize.height * 0.6)}px; border-radius: 35px; object-fit: cover; border: 4px solid rgba(255,255,255,0.9); box-shadow: 0 12px 40px rgba(0,0,0,0.4);`,
                    floating: `width: ${currentLogoSize.width}px; height: ${currentLogoSize.height}px; border-radius: 16px; object-fit: cover; border: 4px solid rgba(255,255,255,0.9); box-shadow: 0 20px 60px rgba(0,0,0,0.3); transform: translateY(-8px);`,
                    banner: `width: ${Math.floor(currentLogoSize.width * 1.6)}px; height: ${Math.floor(currentLogoSize.height * 0.5)}px; border-radius: 8px; object-fit: cover; border: 3px solid rgba(255,255,255,0.9); box-shadow: 0 8px 32px rgba(0,0,0,0.25);`
                };
                
                const logoPositions = {
                    'center-above': 'margin: 0 auto 20px;',
                    'center-below': 'margin: 20px auto 0;',
                    'left-inline': 'margin: 0 20px 0 0; display: inline-block; vertical-align: middle;',
                    'right-inline': 'margin: 0 0 0 20px; display: inline-block; vertical-align: middle;',
                    'top-left': 'position: absolute; top: 20px; left: 20px;',
                    'top-right': 'position: absolute; top: 20px; right: 20px;'
                };
                
                logoHTML = `<img src="${logoUrl}" style="${logoStyles[logoStyle]} ${logoPositions[logoPosition]}" alt="Logo" />`;
            }

            // Build header HTML with background image support
            let headerHTML = '';
            if (toggles.showHeader) {
                let headerBackgroundStyle = '';
                if (headerImageUrl) {
                    headerBackgroundStyle = `background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${headerImageUrl}'); background-size: cover; background-position: center;`;
                } else {
                    headerBackgroundStyle = `background: linear-gradient(135deg, ${primaryColor}, ${adjustBrightness(primaryColor, 15)});`;
                }
                
                let titleHTML = toggles.showTitle ? `<h1 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); ${logoPosition.includes('inline') ? 'display: inline-block; vertical-align: middle;' : ''}">${escapeHtml(companyName)}</h1>` : '';
                let subtitleHTML = toggles.showSubtitle ? `<p style="font-size: 1.1rem; opacity: 0.9;">Professional Booking Experience</p>` : '';
                
                // Adjust layout based on logo position
                let headerContent = '';
                if (logoPosition === 'center-above') {
                    headerContent = `${logoHTML}${titleHTML}${subtitleHTML}`;
                } else if (logoPosition === 'center-below') {
                    headerContent = `${titleHTML}${subtitleHTML}${logoHTML}`;
                } else if (logoPosition === 'left-inline' || logoPosition === 'right-inline') {
                    if (logoPosition === 'left-inline') {
                        headerContent = `<div style="display: flex; align-items: center; justify-content: center; flex-wrap: wrap;">${logoHTML}${titleHTML}</div>${subtitleHTML}`;
                    } else {
                        headerContent = `<div style="display: flex; align-items: center; justify-content: center; flex-wrap: wrap;">${titleHTML}${logoHTML}</div>${subtitleHTML}`;
                    }
                } else {
                    // top-left or top-right
                    headerContent = `${logoHTML}${titleHTML}${subtitleHTML}`;
                }
                
                headerHTML = `
                    <div class="header" style="${headerBackgroundStyle} padding: 40px; text-align: center; color: white; position: relative;">
                        ${headerContent}
                    </div>
                `;
            }

            // Build intro HTML
            let introHTML = '';
            if (toggles.showIntro) {
                introHTML = `
                    <div class="intro" style="text-align: center; margin-bottom: 30px;">
                        <h2 style="color: ${primaryColor}; font-size: 1.8rem; margin-bottom: 15px; font-weight: 600;">Book Your Experience</h2>
                        <p style="color: #666; font-size: 1rem; line-height: 1.6;">${escapeHtml(introText)}</p>
                    </div>
                `;
            }

            // Build footer HTML
            let footerHTML = '';
            if (toggles.showFooter) {
                footerHTML = `
                    <div class="footer" style="text-align: center; margin-top: 30px;">
                        <a href="${escapeHtml(webpageUrl)}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, ${primaryColor}, ${adjustBrightness(primaryColor, 15)}); color: white; text-decoration: none; border-radius: 10px; font-weight: 600; font-size: 1rem; transition: all 0.3s ease; box-shadow: 0 5px 15px ${primaryColor}40;">
                            Visit Our Website ‚Üí
                        </a>
                    </div>
                `;
            }

            // Handle secondary color for widget wrapper
            let widgetBackgroundStyle = '';
            if (secondaryColor === 'transparent') {
                widgetBackgroundStyle = 'background: transparent; border: 2px solid rgba(255,255,255,0.3);';
            } else if (secondaryColor.includes('rgba')) {
                widgetBackgroundStyle = `background: ${secondaryColor}; backdrop-filter: blur(10px);`;
            } else {
                widgetBackgroundStyle = `background: ${secondaryColor};`;
            }

            const html = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${escapeHtml(companyName)} - Booking</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: linear-gradient(135deg, ${primaryColor}, ${adjustBrightness(primaryColor, 20)});
            min-height: 100vh; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            padding: 20px; 
        }
        .booking-container { 
            max-width: 800px; 
            width: 100%; 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px);
            border-radius: 20px; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.15); 
            overflow: hidden; 
        }
        .content { padding: ${toggles.showHeader ? '40px' : '40px 40px 0 40px'}; }
        .widget-wrapper { 
            ${widgetBackgroundStyle}
            border-radius: 15px; 
            padding: 20px; 
            margin: 30px 0; 
            border: 2px solid ${primaryColor}20; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .zaui-embed { 
            min-height: 500px; 
            max-height: 800px;
            overflow-y: auto;
        }
        .zaui-embed iframe {
            width: 100% !important;
            min-height: 500px !important;
            height: auto !important;
        }
        @media (max-width: 768px) { 
            .content { padding: 20px; } 
            .booking-container { max-width: 95%; }
            .header h1 { font-size: 2rem !important; }
            .header img { width: ${Math.floor(currentLogoSize.width * 0.8)}px !important; height: ${Math.floor(currentLogoSize.height * 0.8)}px !important; }
        }
    </style>
</head>
<body>
    <div class="booking-container">
        ${headerHTML}
        <div class="content">
            ${introHTML}
            <div class="widget-wrapper">
                <div class="zaui-embed">
                    ${zauiEmbed}
                </div>
            </div>
            ${footerHTML}
        </div>
    </div>
</body>
</html>`;

            generatedHTML = html;
            console.log('‚úÖ HTML generated successfully');
            return html;
        }

        function displayGeneratedDesign(html) {
            console.log('üñºÔ∏è Displaying design in preview...');
            const container = document.getElementById('previewContainer');
            
            // Create iframe for better isolation and proper sizing
            const iframe = document.createElement('iframe');
            iframe.style.cssText = `
                width: 100%;
                height: 600px;
                border: none;
                border-radius: 8px;
            `;
            
            container.innerHTML = '';
            container.appendChild(iframe);
            
            // Write HTML to iframe
            iframe.contentDocument.open();
            iframe.contentDocument.write(html);
            iframe.contentDocument.close();
            
            console.log('‚úÖ Preview displayed in iframe');
        }

        function copyGeneratedCode() {
            console.log('üìã Copying HTML to clipboard...');
            if (generatedHTML) {
                navigator.clipboard.writeText(generatedHTML).then(() => {
                    showMessage('HTML code copied to clipboard!');
                }).catch(() => {
                    // Fallback for older browsers
                    const textarea = document.createElement('textarea');
                    textarea.value = generatedHTML;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    showMessage('HTML code copied to clipboard!');
                });
            }
        }

        function showMessage(message, type = 'success') {
            console.log(`üì¢ Message (${type}):`, message);
            const messageBox = document.getElementById('messageBox');
            messageBox.className = `mb-6 p-4 rounded-xl border-l-4 transition-all duration-300 ${
                type === 'success' 
                    ? 'bg-green-50 border-green-400 text-green-700' 
                    : 'bg-red-50 border-red-400 text-red-700'
            }`;
            messageBox.textContent = message;
            messageBox.classList.remove('hidden');
            
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 4000);
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function adjustBrightness(hex, percent) {
            hex = hex.replace('#', '');
            const num = parseInt(hex, 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            
            return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // Ready for testing
        console.log('üîß Enhanced version ready - Now with header backgrounds and advanced logo options!');
    </script>
</body>
</html>
